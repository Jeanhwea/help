#+TITLE: 学习 Typescript 的笔记
#+AUTHOR: Jinghui Hu
#+EMAIL: hujinghui@buaa.edu.cn
#+DATE: <2018-10-11 Thu>
#+TAGS: typescript javascript note programing-language


* 笔记

** let 和 var 的区别

let 和 var 两个关键字都可以定义变量，两者的主要区别是他们的作用域不一样的。 var
是函数作用域， let 是块作用域。

#+BEGIN_SRC javascript
  function f(shouldInitialize: boolean) {
    if (shouldInitialize) {
      var x = 10; // 这里如果用 let 定义则 return 就不能返回 x
    }

    return x;
  }

  f(true);  // returns '10'
  f(false); // returns 'undefined'
#+END_SRC

1. 不同作用域

var 声明可以在包含它的函数，模块，命名空间或全局作用域内部任何位置被访问。这里会
引起一些不易察觉的错误，

#+BEGIN_SRC javascript
  // i 被重复定义
  function sumMatrix(matrix: number[][]) {
    var sum = 0;
    for (var i = 0; i < matrix.length; i++) {
      var currentRow = matrix[i];
      for (var i = 0; i < currentRow.length; i++) {
        sum += currentRow[i];
      }
    }

    return sum;
  }
#+END_SRC

#+BEGIN_SRC javascript
  // 每次定义的 i 只会引用最后的变量
  for (var i = 0; i < 5; i++) {
    setTimeout(function() { console.log(i); }, 100 * i);
  }
  // output:
  // 5
  // 5
  // 5
  // 5
  // 5

  // 解决方案是使用 lambda 函数来扩充定义域
  for (var i = 0; i < 5; i++) {
    (function(i) {
      setTimeout(function() { console.log(i); }, 100 * i);
    })(i);
  }
  // output:
  // 1
  // 2
  // 3
  // 4
  // 5
#+END_SRC

2. 重定义及屏蔽

#+BEGIN_SRC javascript
  function f(x) {
      var x;
      var x; // 可以定义
      if (true) {
          var x;
      }
  }

  let x = 10;
  let x = 20; // 错误，不能在1个作用域里多次声明`x`
#+END_SRC


* 参考链接

1. [[https://www.tslang.cn/docs/handbook/typescript-in-5-minutes.html][5分钟上手TypeScript]]，typescript中文官网
2. [[http://www.typescriptlang.org/docs/home.html][Typescript Documentation]]
3. [[https://www.tslang.cn/index.html#download-links][TypeScript 实战视频]]
4. [[https://www.tslang.cn/docs/handbook/basic-types.html][TypeScript 文档]]
